<?xml  version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p" xmlns:tx="http://www.springframework.org/schema/tx"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd



        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd">

       <!-- Настраивает управление транзакциями с помощью аннотации @Transactional -->
       <tx:annotation-driven transaction-manager="transactionManager" />

       <!-- Менеджер транзакций -->
       <bean id="transactionManager"
             class="org.springframework.orm.hibernate5.HibernateTransactionManager">
              <property name="sessionFactory" ref="session" />
       </bean>

       <!--<bean id="messageSource"-->
             <!--class="org.springframework.context.support.ReloadableResourceBundleMessageSource">-->
              <!--<property name="basename" value="classpath:messages" />-->
              <!--<property name="defaultEncoding" value="UTF-8" />-->
       <!--</bean>-->

       <!-- Настройки бина dataSource будем хранить в отдельном файле -->
       <!--<bean id="propertyConfigurer"-->
             <!--class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"-->
             <!--p:location="/WEB-INF/jdbc.properties" />-->

       <!-- Непосредственно бин dataSource -->
       <bean id="dataSource"
             class="org.springframework.jdbc.datasource.DriverManagerDataSource"
             p:driverClassName="org.postgresql.Driver"
             p:url="jdbc:postgresql://localhost:5432/postgres"
             p:username="postgres"
             p:password="makros32"/>

       <!-- Настройки фабрики сессий Хибернейта -->
       <bean id="session"
             class="org.springframework.orm.hibernate5.LocalSessionFactoryBean">
              <property name="dataSource" ref="dataSource" />
              <property name="configLocation" value="classpath:hibernate.cfg.xml"/>
              <!--<property name="configurationClass">-->
                     <!--<value>org.hibernate.cfg.AnnotationConfiguration</value>-->
              <!--</property>-->
              <property name="hibernateProperties">
                     <props>
                            <prop key="hibernate.show_sql">true</prop>
                            <prop key="hibernate.dialect">org.hibernate.dialect.PostgreSQLDialect</prop>
                            <prop key="hibernate.pool_size">1</prop>
                            <prop key="current_session_context_class">thread</prop>
                            <prop key="hibernate.connection.charSet">UTF-8</prop>
                     </props>
              </property>
       </bean>

</beans>